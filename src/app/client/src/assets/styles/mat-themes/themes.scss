/**
* Created at 1397/12/14 (2019/3/5).
* @author {@link https://mirismaili.github.io S. Mahdi Mir-Ismaili}
*/

// @use "@angular/material" as mat;
// @include mat-core();

// Custom Theming for Angular Material
// For more information: https://material.angular.io/guide/theming
@use "sass:map";
@use "@angular/material"as mat;
@use "./palette"as *;
@use "./includes"as *;
@import "./../../../app/app.component.scss";

// Whether duplication warnings should be disabled. Warnings enabled by default.
mat.$theme-ignore-duplication-warnings: true !default;
// Whether density should be generated by default.
$_generate-default-density: true !default;

@include mat.strong-focus-indicators((border-style: dotted,
    border-width: 0.125rem,
    border-radius: 0.125rem,
  ));

  /* test root */
  :root {
    --list-container-bg: #fff;
    --user-profile-box: #fff;
    --dot-divider: #333;
    --mat-footer-bg: #fff;
  }


  @mixin app-themes($theme) {
    /* all */
    @include mat.all-component-themes($theme);
    @include mat.strong-focus-indicators-theme($theme);
    @include theme-mat-card($theme);
    @include theme-mat-sidebar($theme);
    @include app-component-theme($theme);
    @include theme-mat-modal($theme);
    @include toolbar-menu($theme);
    @include pageback-toolbar($theme);
    @include mat-form-field($theme);
    @include mat-list($theme);
    @include mat-badge($theme);
    @include mat-tab-group($theme);
    @include theme-var-colors($theme);
    @include mat-spinner-card($theme);
    @include mat-expansion-panel($theme);
    @include theme-mat-chips($theme);
    @include global-search($theme);
    // @include color($theme, $variants-theme);
    //  /* different typography based on the theme -  */
    //  @include mat.all-component-typographies($typography);
    //  /* custom typography rem */
    //  @include mat.core($custom-typography);
    /* dark */
    // @include mat.all-component-colors($theme);
    // @include mat.strong-focus-indicators-theme($theme);
    //@include theme-mat-chips($theme);
    // @include theme-var-colors($theme);
    // @include mat-badge($theme);
    // @include app-component-theme($theme); //testing
  }

@each $css-class,
$theme in $app-themes {
  $primary: if(map-has-key($theme, primary),
      map-get($theme, primary),
      mat.define-palette(map-get($theme, primary-base)));
  $accent: if(map-has-key($theme, accent),
      map-get($theme, accent),
      mat.define-palette(map-get($theme, accent-base)));
  $success: if(map-has-key($theme, success),
      map-get($theme, success),
      mat.define-palette(map-get($theme, success-base)));
  $warn: if(map-has-key($theme, warn),
      map-get($theme, warn),
      mat.define-palette(if(map-has-key($theme, warn-base),
          map-get($theme, warn-base),
          mat.$red-palette)));
  $background: if(map-has-key($theme, background),
      map-get($theme, background),
      mat.define-palette(if(map-has-key($theme, background),
          map-get($theme, background),
          $background)));
  $foreground: if(map-has-key($theme, foreground),
      map-get($theme, foreground),
      mat.define-palette(if(map-has-key($theme, foreground),
          map-get($theme, foreground),
          $foreground)));
  $typography: if(map-has-key($theme, typography),
      map-get($theme, typography),
      mat-config(if(map-has-key($config, typography),
          map-get($config, typography),
          typography)));

          $app-themes-light: mat.define-light-theme($primary, $accent, $warn);
          $app-themes-dark: mat.define-dark-theme($primary, $accent, $warn);

    /* #{$css-class} starts here */
  .#{$css-class} {
    // light theme
    // $app-themes: mat.define-light-theme($primary, $accent, $warn);
    @include app-themes($app-themes-light);
    // @include mat.all-component-themes($app-themes);
    // @include mat.strong-focus-indicators-theme($app-themes);
        // @include app-root-theme(mat.define-light-theme($primary, $accent, $warn));
    // @include theme-mat-card($app-themes);
    // @include theme-mat-sidebar($app-themes);
    // @include app-component-theme($app-themes);
    // common styles for all themes
    // @include theme-mat-modal($app-themes);
    // @include toolbar-menu($app-themes);
    // @include pageback-toolbar($app-themes);
    // @include mat-form-field($app-themes);
    // @include mat-list($app-themes);
    // @include mat-badge($app-themes);
    // @include mat-tab-group($app-themes);
    // @include theme-var-colors($app-themes);
    // @include mat-spinner-card($app-themes);
    // @include mat-expansion-panel($app-themes);
    // @include theme-mat-chips($app-themes);
    // @include global-search($app-themes);
    // @include color($app-themes, $variants-theme);

    /* different typography based on the theme -  */
    @include mat.all-component-typographies($typography);
    /* custom typography rem */
    @include mat.core($custom-typography);

    $primary50: mat.get-color-from-palette($primary, 50);
    $primary100: mat.get-color-from-palette($primary, 100);
    $primary200: mat.get-color-from-palette($primary, 200);
    
    --sbt-body-bg: var(--color-primary-50);
    --sbt-body-bg2: var(--color-primary-100);
    --sbt-footer-bg: var(--sbt-body-bg2);
    --cc-grade-pill-container-bg: var(--sbt-body-bg);
    --sbt-compt-bg: var(--sbt-body-bg);
    --cc-chapter-bg: var(--sbt-body-bg2);
    --sbt-filter-bar-bg: var(--sbt-body-bg);

    --sbt-box-shadow-black: rgba(var(--rc-rgba-black), 0.2);
    --sbt-box-shadow-6px: 0.375rem 0.375rem 0.125rem 0 var(--sbt-box-shadow-black);
    --sbt-box-shadow-3px: 0.1875rem 0.1875rem 0.125rem 0 var(--sbt-box-shadow-black);
    --sbt-bradius: 0.125rem;
    --sbt-bradius-8: calc(var(--sbt-bradius) * 4);
    --sbt-bradius-16: calc(var(--sbt-bradius) * 8);
    --sbt-bradius-24: calc(var(--sbt-bradius) * 12);
    --sbt-bradius-32: calc(var(--sbt-bradius) * 16);

    --sb-graph-section-bg: var(--sbt-body-bg2);
    --mat-list-bg-active: var(--sbt-body-bg);
    --mat-list-border-active: var(--sbt-body-bg2);
    .mat-app-background {
      background: mat.get-color-from-palette($primary, 50);
    }

    // dark theme or $css-class=="purple-green" or $css-class=="green-grey"
    @if $css-class=="pink-bluegrey" {
      // $app-themes: mat.define-dark-theme($primary, $accent, $warn);
      @include app-themes($app-themes-dark);
      // $app-themes: mat.define-dark-theme($primary, $accent, $warn);
      // @include mat.all-component-colors($app-themes);
      // @include mat.strong-focus-indicators-theme($app-themes);
      // @include theme-mat-chips($app-themes);
      // @include theme-var-colors($app-themes);
      // @include mat-badge($app-themes);
      // @include app-component-theme($app-themes);
      $primary100: map-get($background,
          background); // mat.get-color-from-palette($accent, 900);
      $primary200: #232323;
      --sbt-body-bg: #{$primary100};
      --sbt-body-bg2: #{$primary200}; // 232323
      // --sb-profile-bg-c-4: var(--sbt-body-bg);
      --sbt-footer-bg: var(--sbt-body-bg2);
      --cc-grade-pill-container-bg: var(--sbt-body-bg);
      --sbt-compt-bg: var(--sbt-body-bg);
      --sb-modal-content-bg: var(--sbt-body-bg);
      --sb-modal-actions-bg: var(--sbt-body-bg);
      --cc-chapter-bg: var(--sbt-body-bg2);
      --sb-section-preference: var(--white);
      --sbt-footer-info-links: var(--white);
      --sbt-filter-bar-bg: var(--sbt-body-bg);
      --list-container-bg: var(--sbt-body-bg2);
      --user-profile-box: var(--sbt-body-bg);
      --mat-list-bg: var(--sbt-body-bg);
      --mat-list-border: var(--sbt-body-bg);
      --mat-list-border-active: var(--color-success-500);
      --mat-list-bg-active: var(--sbt-body-bg2);
      --dot-divider: #fff;
      --cc-mat-card-img-container-border:#232323;
      //lazy loading styles
      --cc-mat-card-animation-bg: #333;
      --cc-mat-card-loading-bg: #666;
      --cc-mat-card-loading-highlight1: #555;
      --cc-mat-card-loading-highlight2: #777;
      --mat-footer-bg: #232323;
      .item.active .sb-icon {
        background: #000 !important;
      }
    }

    // $variant-themes:mat.define-light-theme($success,$info);
    // @include button-variants.color($variant-themes, $variants-theme);
    // common styles
    .item.active .sb-icon {
      background: #fff;
    }
  }

  /* theme button */
  .themeMenuDropdown .#{$css-class} use.docs-theme-icon-background {
    fill: map-get($background, background);
  }

  .themeMenuDropdown .#{$css-class} use.docs-theme-icon-button {
    fill: mat.get-color-from-palette($accent, 500);
  }

  .themeMenuDropdown .#{$css-class} use.docs-theme-icon-toolbar {
    fill: mat.get-color-from-palette($primary, 500);
  }
}

/* accessibilty grey bar */
@import "./accessbilityBar";

