<app-modal-wrapper (dismiss)="modelClose.emit()" [config]="{disableClose: false, width: '45rem', size: 'normal'}">
  <ng-template sbModalContent>

    <!--Header-->
    <div mat-dialog-title class="mb-0">
      <h2 class="mb-0">{{resourceService.frmelmnts?.lbl?.sltBtch}}</h2>
      <button mat-mini-fab color="warn" class="ml-auto" aria-label="close dialog"
        mat-dialog-close><mat-icon>close</mat-icon></button>
    </div>
    <!--/Header-->
    <!--Content-->
    <mat-dialog-content>
      <div *ngIf="!hasOngoingBatches" class="mat-subheading-1 font-weight-bold mb-8 color-accent text-left">
        {{resourceService.frmelmnts?.lbl?.exprdbtch}}</div>
      <div *ngFor="let batchDetails of enrolledBatches" class="batch-row mb-16 text-left">
        <div class="mat-body-2 d-block mb-16">{{batchDetails.batch.name}}</div>
        <div class="d-flex flex-dc">
          <div class="px-10"><mat-icon>calendar_month</mat-icon></div>
          <div class="mat-body-2 d-flex flex-dc">
            <span class="mb-4">
              <b class="font-weight-bold">{{resourceService.frmelmnts?.lbl?.startdate}} : </b>
              {{batchDetails.batch.startDate | dateFormat}}
            </span>
            <span class="mb-4"><b class="font-weight-bold">{{resourceService.frmelmnts?.lbl?.enddate}}: </b>
              {{batchDetails.batch.endDate | dateFormat}}</span>
            <span
              *ngIf="userDetails[batchDetails.batch.createdBy] && userDetails[batchDetails.batch.createdBy].firstName">{{resourceService.frmelmnts?.lbl?.courseCreatedBy}}:
              {{userDetails[batchDetails.batch.createdBy].firstName}}</span>
          </div>
          <button mat-raised-button color="accent" appTelemetryInteract [telemetryInteractEdata]="resumeInteractEdata"
            [telemetryInteractObject]="{id: batchDetails.identifier, type:'CourseBatch', ver:'1.0'}"
            [telemetryInteractCdata]="[{ type: 'course', id: batchDetails.courseId}]" tabindex="0"
            (click)="handleResumeEvent(batchDetails)"
            class="button-rounded ml-auto">{{resourceService.frmelmnts?.btn?.resume}}</button>
        </div>
      </div>
      <mat-divider *ngIf="!hasOngoingBatches && openForEnrollBatches.length"></mat-divider>
      <div *ngIf="!hasOngoingBatches && openForEnrollBatches.length" class="mat-subheading-1 mb-16 color-accent text-left">
        {{resourceService.frmelmnts?.lbl?.opndbtch}}
      </div>
      <div *ngIf="!hasOngoingBatches && openForEnrollBatches.length">
        <div *ngFor="let batchDetails of openForEnrollBatches" class="batch-row mb-16 text-left">
          <div class="mat-body-2 d-block mb-16">{{batchDetails.name}}</div>
          <div class="d-flex flex-dc">
            <div class="px-10"><mat-icon>calendar_month</mat-icon></div>
            <div class="d-flex flex-dc">
              <span class="mb-4">
                <b class="font-weight-bold">{{resourceService.frmelmnts?.lbl?.startdate}} :
                </b>
                {{batchDetails.startDate | dateFormat}}
              </span>
              <span class="mb-4"><b class="font-weight-bold">{{resourceService.frmelmnts?.lbl?.enddate}}
                  :
                </b>
                {{batchDetails.endDate | dateFormat}}</span>
              <span
                *ngIf="userDetails[batchDetails.createdBy] && userDetails[batchDetails.createdBy].firstName">{{resourceService.frmelmnts?.lbl?.courseCreatedBy}}:
                {{ userDetails[batchDetails.createdBy].firstName}}</span>
            </div>
            <button mat-raised-button color="accent" appTelemetryInteract [telemetryInteractEdata]="enrollInteractEdata"
              [telemetryInteractObject]="{id: batchDetails.identifier, type:'CourseBatch', ver:'1.0', rollup:{l1: batchDetails.courseId,l2: batchDetails.identifier}}"
              [telemetryInteractCdata]="[{ type: 'course', id: batchDetails.courseId}]"
              [disabled]="(handleEnrollmentEndDate(batchDetails) || handleStartDate(batchDetails) || disableEnrollBtn)"
              tabindex="0" (click)="handleEnrollEvent(batchDetails)"
              class="button-rounded ml-auto">{{resourceService?.frmelmnts?.btn?.enroll}}</button>
          </div>
        </div>
      </div>
    </mat-dialog-content>

  </ng-template>
</app-modal-wrapper>