<app-landing-section
  [noTitle]="true"
  [layoutConfiguration]="layoutConfiguration">
</app-landing-section>

<mat-toolbar color="primary" class="toolbar-pageback">
  <div class="d-flex flex-ai-center w-below-sm-100 w-above-sm-60">
     <button type="button" mat-mini-fab color="accent"
     class="button-rounded" tabindex="0" (click)="goBack()"
     attr.aria-label="{{resourceService?.frmelmnts?.btn?.back}}">
     <mat-icon aria-hidden="false" fontIcon="arrow_back"></mat-icon>
   </button>
   <div class="toolbar-pageback__heading">
    <h3 class="mat-title mb-0 sb__ellipsis" tabindex="0" role="heading" aria-level="2"></h3>
   </div>
  </div>
 </mat-toolbar>

<div class="mat-inside-page-container mat-app-background2 solutions-listing-component">

  <ng-container *ngIf="solutionList.length">
    <mat-tab-group mat-align-tabs="center" color="accent">
      <mat-tab>
        <ng-template mat-tab-label>
          <h3 class="mb-0 d-flex flex-ai-center font-weight-bolds">
            <mat-icon class="mr-8">monitoring</mat-icon>
            {{resourceService.frmelmnts?.lnk?.report}}
          </h3>
        </ng-template>
        <div class="p-24">
          <div class="d-flex flex-ai-center my-8">
            <div>
              show <select [(ngModel)]="pageSize" class="dataTables_filter search-entries"
                (change)="changeLimit($event)">
                <option value="10" selected>10</option>
                <option value="20">20</option>
                <option value="25">25</option>
              </select> entries
            </div>
            <div class="ml-auto">
              <select [(ngModel)]="selectedEntity" class="dataTables_filter search-entity"
                (change)="getDataByEntity($event)">
                <option value="selected" selected disabled hidden>Entity Filter</option>
                <option value="{{entity}}" *ngFor="let entity of filters">{{entity}}</option>
              </select>
            </div>
          </div>
          <table datatable [dtOptions]="dtOptions"
            class="sb-table sb-table-hover sb-table-striped sb-table-sortable w-100 table-bottom">
            <thead>
              <tr>
                <th class="header-section">{{resourceService?.frmelmnts?.lbl?.serialno}}</th>
                <th class="header-section"></th>
                <th>{{resourceService?.frmelmnts?.lbl?.title}}</th>
                <th class="date-section">{{resourceService?.frmelmnts?.lbl?.latestSubmission}}</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let solution of solutionList;let i=index"
                (click)="(solution?.entities?.length >1) ? goToEntityList(solution) : goToReports(solution)">
                <td tabindex="0" class="header-section">{{i+1}}</td>
                <td tabindex="0"><button class="sb-btn sb-btn-link sb-btn-link-primary sb-btn-normal iconSize"
                    aria-label="file-icon">
                    <i class="icon copy outline alternate large"></i></button></td>
                <td tabindex="0">
                  <div class="sb-media">
                    <div class="sb-media-body">
                      <h6 class="p-0">
                        {{solution.name}}</h6>
                      <p class="media-description sb__ellipsis"> {{solution.programName}}</p>
                    </div>
                  </div>
                </td>
                <td tabindex="0" class="date-section">{{solution.completedDate| date: "yyyy/MM/dd"}}</td>
              </tr>
            </tbody>
          </table>
        </div>
        
        <div class="w-100" *ngIf="paginationDetails.totalItems > 5">
          <div class="sb-pagination-container flex-jc-flex-end mt-16" *ngIf="paginationDetails.pages.length">
            <div class="sb-pagination my-0">
              <a role="button" title="{{resourceService?.frmelmnts?.lbl?.first}}"
                attr.aria-label="{{resourceService?.frmelmnts?.lbl?.first}}"
                [ngClass]="{disabled:paginationDetails.currentPage===1 }" class="sb-item "
                (click)="navigateToPage(1) ">&laquo;</a>
              <a role="button" title="{{resourceService?.frmelmnts?.lbl?.previous}}"
                attr.aria-label="{{resourceService?.frmelmnts?.lbl?.previous}}"
                [ngClass]="{disabled:paginationDetails.currentPage===1 }" class="sb-item "
                (click)="navigateToPage(paginationDetails.currentPage - 1)">&lt;</a>
              <a role=“button” aria-current=“page” title="{{page}}" attr.aria-label="{{page}}"
                *ngFor="let page of paginationDetails.pages" [ngClass]="{active:paginationDetails.currentPage===page}"
                (click)="navigateToPage(page)" class="sb-item">{{page}}</a>
              <a title="{{resourceService?.frmelmnts?.lbl?.next}}"
                attr.aria-label="{{resourceService?.frmelmnts?.lbl?.next}}" role="button"
                [ngClass]="{disabled:paginationDetails.currentPage=== paginationDetails.totalPages}"
                (click)="navigateToPage(paginationDetails.currentPage + 1)" class="sb-item">&gt;</a>
              <a role="button" title="{{resourceService?.frmelmnts?.lbl?.last}}"
                attr.aria-label="{{resourceService?.frmelmnts?.lbl?.last}}"
                [ngClass]="{disabled:paginationDetails.currentPage=== paginationDetails.totalPages}"
                (click)="navigateToPage(paginationDetails.totalPages)" class="sb-item ">&raquo;</a>
            </div>
          </div>
        </div>
        
      </mat-tab>
    </mat-tab-group>
  </ng-container>

  <app-no-result *ngIf="noResult" [data]="noResultMessage"></app-no-result>

  <app-loader *ngIf="showLoader" [data]='loaderMessage'></app-loader>
</div>


  <app-entity-list *ngIf="showModal" (closeEvent)="modalClose($event)"  [solution]="solution"></app-entity-list>