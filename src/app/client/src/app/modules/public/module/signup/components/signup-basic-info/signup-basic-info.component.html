<div [formGroup]="personalInfoForm" class="signup-form-content">

    <h4 tabindex="0" *ngIf="telemetryImpression"
        [ngClass]="{'hide': routeParams?.loginMode == 'gmail','show':routeParams?.loginMode != 'gmail'}"
        [appTelemetryImpression]="telemetryImpression" class="font-weight-bold text-center mb-24">
        {{resourceService.frmelmnts.lbl.registerOn | interpolate:'{instance}': instance}}</h4>
    <h4 tabindex="0" *ngIf="telemetryImpression"
        [ngClass]="{'show': routeParams?.loginMode == 'gmail','hide': routeParams?.loginMode != 'gmail'}"
        [appTelemetryImpression]="telemetryImpression" class="font-weight-bold text-center mb-24">
        {{resourceService.frmelmnts.lbl.followingdetails | interpolate:'{instance}': instance}}</h4>

    <div class="d-flex flex-dc mb-16">
        <!-- <label for="signup-form-name" class="mb-8 font-weight-bold">
            {{resourceService.frmelmnts?.lbl?.name}}<span class="color-warn">*</span>
        </label> -->

        <mat-form-field color="accent" appearance="fill">
            <mat-label>{{resourceService.frmelmnts?.lbl?.name}}</mat-label>
            <input id="signup-form-name" matInput
                [ngClass]="{'orange-border': personalInfoForm.controls.name.touched && personalInfoForm.controls['name'].errors}"
                formControlName="name" type="text" name="name" autocomplete="off" aria-required="true">
                <mat-error class="mat-caption" aria-describedby="signup-form-name" tabindex="0" aria-label="enter name"
                    *ngIf="personalInfoForm.controls.name.touched && personalInfoForm.controls['name'].errors && personalInfoForm.controls['name'].errors.required">{{resourceService.frmelmnts?.lbl?.enterName}}</mat-error>
        
                <mat-error class="mat-caption" aria-describedby="signup-form-name" tabindex="0" aria-label="enter a valid name"
                    *ngIf="personalInfoForm.controls.name.touched && personalInfoForm.controls['name'].errors && personalInfoForm.controls['name'].errors.pattern">
                    {{resourceService.frmelmnts.lbl.enterValidName}}</mat-error>
        </mat-form-field>


    </div>

    <div class="d-flex flex-dc mb-16">
        <!-- <label for="signup-form-yearofbirth"
            class="mb-8 font-weight-bold">{{resourceService.frmelmnts?.lbl?.yearOfBirth}}<span
                class="color-warn">*</span></label> -->
        <mat-form-field *ngIf="!isIOSDevice" aria-required="true" appearance="fill" class="w-100" color="accent">
            <mat-label>{{resourceService.frmelmnts?.lbl?.yearOfBirth}}</mat-label>
            <input type="text" (keypress)="isNumber(event)" formControlName="yearOfBirth" tabindex="0"
                [attr.aria-label]="resourceService.frmelmnts?.lbl?.yearOfBirth" matInput
                [matAutocomplete]="auto" maxlength="4">
            <mat-autocomplete (optionSelected)="changeBirthYear($event)" role="combobox" #auto="matAutocomplete">
                <mat-option role="listbox" *ngFor="let option of filteredYOB | async" [value]="option">
                    {{option}}
                </mat-option>
            </mat-autocomplete>
        </mat-form-field>

        <label *ngIf="isIOSDevice">
            <select name="birthYearOptions" id="birthYearOptions" class="birthYearOptions"
                (change)="changeBirthYear($event, true)">
                <option value="" disabled selected>{{resourceService.frmelmnts?.lbl?.year}}</option>
                <option *ngFor="let option of birthYearOptions" [value]="option">{{option}}</option>
            </select>
        </label>
        <div class="color-warn pt-0" aria-describedby="signup-form-yearofbirth" tabindex="0"
            [attr.aria-label]="resourceService.frmelmnts?.lbl?.yearOfBirth"
            *ngIf="personalInfoForm.controls.yearOfBirth.touched  && personalInfoForm.controls['yearOfBirth'].errors && personalInfoForm.controls['yearOfBirth'].errors.required">
            {{resourceService.frmelmnts?.lbl?.yearOfBirth}}</div>
        <div class="color-warn pt-0" aria-describedby="signup-form-yearofbirth" tabindex="0"
            [attr.aria-label]="resourceService.frmelmnts?.lbl?.yearOfBirth"
            *ngIf="personalInfoForm.controls.yearOfBirth.touched && personalInfoForm.controls['yearOfBirth'].errors && personalInfoForm.controls['yearOfBirth'].errors.pattern">
            {{resourceService.frmelmnts.lbl.yearOfBirth}}</div>
        <div class="color-warn pt-0" aria-describedby="signup-form-yearofbirth" tabindex="0"
            [attr.aria-label]="resourceService.frmelmnts?.lbl?.validYearOfBirth"
            *ngIf="personalInfoForm.controls.yearOfBirth.touched  && personalInfoForm.controls['yearOfBirth'].errors && (personalInfoForm.controls['yearOfBirth'].errors.min  ||  personalInfoForm.controls['yearOfBirth'].errors.max) && !(personalInfoForm.controls.yearOfBirth.touched && personalInfoForm.controls['yearOfBirth'].errors && (personalInfoForm.controls['yearOfBirth'].errors.pattern  || personalInfoForm.controls['yearOfBirth'].errors.required))">
            {{resourceService.frmelmnts?.lbl?.validYearOfBirth}}</div>
    </div>
    <button [attr.aria-disabled]="!personalInfoForm.valid" [disabled]="!personalInfoForm.valid" type="biutton"
        appTelemetryInteract [telemetryInteractEdata]="submitInteractEdata" [telemetryInteractCdata]="telemetryCdata"
        mat-raised-button color="accent" class="button-rounded text-uppercase w-100 mt-16" tabindex="0"
        (click)="next()">{{resourceService.frmelmnts.lbl.continue}}<mat-icon>arrow_right_alt</mat-icon></button>
</div>