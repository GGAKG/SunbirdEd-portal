<app-landing-section [appTelemetryImpression]="telemetryImpression" [textToDisplay]=""
  [layoutConfiguration]="layoutConfiguration" [noTitle]="true">
</app-landing-section>

<mat-toolbar color="primary" class="toolbar-pageback">
  <button mat-mini-fab color="accent" (click)="goBack()" attr.aria-label="{{resourceService?.frmelmnts?.btn?.back}}" tabindex="0">
    <mat-icon>arrow_back</mat-icon>
  </button>
  <div class="MetaColumn">
    <h3 class="title" tabindex="0" role="heading" aria-level="2">{{resourceService?.frmelmnts?.tab?.help}}</h3>
    <div class="mat-small mt-4" *ngIf="isDesktopApp">
      {{resourceService?.frmelmnts?.lbl?.learn_more | interpolate:'{instance}': instance}}</div>
    <div class="mat-small mt-4" *ngIf="!isDesktopApp">{{resourceService?.frmelmnts?.lbl?.frequentlyAskedQuestions}}</div>
  </div>
</mat-toolbar>

<div class="mat-inside-page-container mat-app-background2 mat-help-page">
    <div *ngIf="showLoader">
      <app-loader></app-loader>
    </div>
    <div class="mat-body-1 font-weight-bold" *appDesktopOnly>
      {{resourceService?.frmelmnts?.lbl?.frequentlyAskedQuestions}}</div>
    <div class="help-page__content" *ngIf="faqData && !showLoader">
      <div class="d-flex" style="min-height:600px;">
        <div class="flex-basis-1">
          <section class="sbhelp_container__left mat-app-background br-24" *ngIf="(isMobileView && showOnlyFaqCategory) || !isMobileView">
            <sb-list #sbFaqCategoryList [title]="faqData?.constants?.selectCategoryTitle" [listData]="faqData?.categories"
              [btnText]="faqData?.constants?.reportIssueMsg" [btnImg]="'./assets/images/report.svg'"
              (itemClick)="onCategorySelect($event)" tabindex="0" (btnClick)="enableFaqReport($event)">
            </sb-list>
          </section>
          <section class="sbhelp_container__left mt-16 p-0" *ngIf="(isMobileView && showOnlyFaqCategory) || !isMobileView">
            <mat-accordion>
              <mat-expansion-panel class="mat-app-background">
                <mat-expansion-panel-header>
                  <mat-panel-title tabindex="0" title class="mat-subheading-1 mb-0">
                    {{resourceService?.frmelmnts?.lbl?.debugModeTitle}}
                  </mat-panel-title>
                </mat-expansion-panel-header>
                <mat-slide-toggle [checked]="isDisabled" (change)="enableDebugMode($event);" 
                  [ngClass]="{'disabled': isDisabled }" [disabled]="isDisabled">{{resourceService?.frmelmnts?.lbl?.enableDebugMode}}
                </mat-slide-toggle>
                <div class="sb-developer-option__info mat-small" [hidden]="!isDisabled">{{resourceService?.messages?.smsg?.debugMode | interpolate:'{time}':time}}</div>
              </mat-expansion-panel>
            </mat-accordion>
        </section>
      </div>
        <section class="sbhelp_container__right" *ngIf="(isMobileView && !showOnlyFaqCategory) || !isMobileView">
          <div *ngIf="!showFaqReport">
          <div class="d-flex flex-ai-center mb-8" *ngIf="!showOnlyFaqCategory && isMobileView">
            <h4 class="ml-16"><b>{{selectedFaqCategory?.name}}</b></h4>
          </div>
          <div *ngIf="selectedFaqCategory?.videos?.length">
            <sb-carousel [title]="faqData?.constants?.videoTitle" [listData]="selectedFaqCategory?.videos" (itemClick)="onVideoSelect($event)"></sb-carousel>
          </div>
        
        <div *ngIf="selectedFaqCategory?.faqs?.length">
          <h4 class="font-weight-bold mb-16">{{faqData?.constants?.faqTitle}}</h4>
          <div class="mat-app-background br-24 p-24">
            <sb-faq [extraTemplate]="extraTemplate" [data]="selectedFaqCategory"
              (toggleGroupEvent)="logInteractEvent($event, 'toggle-clicked');"
              (yesClickedEvent)="logInteractEvent($event, 'yes-clicked');" tabindex="0"
              (noClickedEvent)="logInteractEvent($event, 'no-clicked');"
              (submitClickedEvent)="logInteractEvent($event, 'submit-clicked');">
            </sb-faq>
          </div>

        </div>
        </div>
          <div *ngIf="showFaqReport">
            <app-faq-report [faqData]="faqData"></app-faq-report>
          </div>
        </section>
        
      </div>
    </div>
    <div class="mat-app-background br-24 mt-24 w-100 p-16 d-flex flex-ai-center relative9"
      *ngIf="faqData && !showLoader">
      <div class="mat-body-1 mr-auto visit-helpcenter__text">{{resourceService?.frmelmnts?.lbl?.stillCouldntFind}}
        <b>{{resourceService.frmelmnts?.lnk?.footerHelpCenter}}</b></div>
        <button mat-stroked-button color="accent" class="button-rounded" role="button" appTelemetryInteract [telemetryInteractEdata]="setTelemetryInteractEdata('help-center')"
        href="{{defaultFooterConfig?.helpCenterLink}}" [target]="isDesktopApp ? '_blank' : '_self'">{{resourceService?.frmelmnts?.lbl?.goToHelpCenter}}</button>
    </div>
</div>

<ng-template #extraTemplate>
  <div class="mat-body-1 visit-helpcenter__text mr-16">{{resourceService?.frmelmnts?.lbl?.stillCouldntFind}}
    <b>{{resourceService.frmelmnts?.lnk?.footerHelpCenter}}</b></div>
  <button mat-stroked-button color="accent" class="button-rounded" role="button" appTelemetryInteract
    [telemetryInteractEdata]="setTelemetryInteractEdata('help-center')" href="{{defaultFooterConfig?.helpCenterLink}}"
    [target]="isDesktopApp ? '_blank' : '_self'">
    {{resourceService?.frmelmnts?.lbl?.goToHelpCenter}}
  </button>
</ng-template>

<app-modal-wrapper *ngIf="showVideoModal && playerConfig" [config]="{disableClose: false, width: '45rem', panelClass: 'material-modal'}"
  (dismiss)="showVideoModal = false">
  <ng-template sbModalContent>
    <div mat-dialog-title class="flex-jc-center flex-dc mb-0">
      <button mat-mini-fab color="warn" class="ml-auto" aria-label="close dialog" mat-dialog-close><mat-icon>close</mat-icon></button>
    </div>
    <mat-dialog-content class="pt-0">
      <sunbird-video-player [playerConfig]="playerConfig" #videoPlayer></sunbird-video-player>
    </mat-dialog-content>
  </ng-template>
</app-modal-wrapper>