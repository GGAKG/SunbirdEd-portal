<mat-drawer-container class="example-container" [hasBackdrop]="'true'">
  <mat-drawer-content style="overflow: hidden;">
    <div class="mat-app-background new-footer">
      <app-desktop-app-update *appDesktopOnly></app-desktop-app-update>
      <div [ngClass]="{
          loggedInUser: userService.loggedIn,
          guestUser: !userService.loggedIn
        }">

        <div *ngIf="!isDesktopApp" [ngClass]="{ hide: isFullScreenView }" class="accessibility-toolbar mb-8">
          <mat-toolbar color="accent"
            class="d-flex flex-w-wrap flex-dc-below-xs flex-jc-center-below-xs py-4-max-xs h-auto-below-xs">
            <!-- <div class="sb-secondary-btn"> flex-dc-column flex-jc-center  
            <button mat-raised-button color="info" class="" (click)="drawer.toggle()">Toggle drawer</button>
           </div> -->
            <div class="example-spacer d-none d-above-xs-block"></div>
            <div aria-label="accessibility links" class="d-flex flex-ai-center" *ngIf="showNavAccessibility === 'true'">
              <a *ngIf="!hideHeaderNFooter" mat-button href="javascript:void(0);" class="hover-color-primary px-8"
                title="{{
              resourceService?.frmelmnts?.lbl?.accessibilitytskip
            }}" tabindex="0" (click)="skipToMainContent()">{{
                resourceService?.frmelmnts?.lbl?.accessibilitytskip
                }}</a>
              <!-- <span>|</span> -->
              <a mat-button href="/screenreaderaccess.html" class="hover-color-primary px-8" tabindex="0" title="{{
              resourceService?.frmelmnts?.lbl?.accessibility
            }}">{{ resourceService?.frmelmnts?.lbl?.accessibility }}</a>
              <!-- <span>|</span> -->
              <ng-container *ngIf="userService.loggedIn">
                <a class="hover-color-primary px-0" mat-button title="{{
                  resourceService?.frmelmnts?.lbl?.accessibilitytext
                }}" tabindex="0" href="/sitemap.html?session=true">{{
                  resourceService?.frmelmnts?.lbl?.accessibilitytext
                  }}</a>
              </ng-container>
              <ng-container *ngIf="!userService.loggedIn">
                <a class="hover-color-primary px-0" mat-button title="{{
                  resourceService?.frmelmnts?.lbl?.accessibilitytext
                }}" tabindex="0" href="/sitemap.html">{{
                  resourceService?.frmelmnts?.lbl?.accessibilitytext
                  }}</a>
              </ng-container>
            </div>
            <div role="navigation" aria-label="Font Size" class="pl-4-min-xs d-flex flex-ai-center">
              <span class="opacity50 font-weight-normal mx-4">|</span>
              <button mat-icon-button type="button" [attr.aria-pressed]="false" tabindex="0" aria-label="{{
              resourceService?.frmelmnts?.lbl?.accessibilityfont}}" class="mat-body-2 mb-0 hover-bgcolor-primary" title="{{resourceService?.frmelmnts?.lbl?.accessibilityfont
            }}" (click)="changeFontSize('decrease')" #decreaseFontSize>A-</button>
              <button mat-icon-button [attr.aria-pressed]="false" type="button" tabindex="0" aria-label="{{
              resourceService?.frmelmnts?.lbl?.accessibilityfntdflt}}" class="mat-body-2 mb-0 hover-bgcolor-primary" title="{{resourceService?.frmelmnts?.lbl?.accessibilityfntdflt
            }}" (click)="changeFontSize('reset')" #resetFontSize>A</button>
              <button mat-icon-button [attr.aria-pressed]="false" type="button" tabindex="0" aria-label="{{
              resourceService?.frmelmnts?.lbl?.accessibilitytextsize}}" class="mat-body-2 mb-0 hover-bgcolor-primary" title="{{resourceService?.frmelmnts?.lbl?.accessibilitytextsize}}" (click)="changeFontSize('increase')" #increaseFontSize>A+</button>
              <span class="opacity50 font-weight-normal mx-4">|</span>
              <button mat-icon-button id="theme-selector" class="hover-bgcolor-primary" [mat-menu-trigger-for]="themeMenu"
                matTooltip="Select a theme!" tabindex="0">
                <mat-icon class="auto-flip">format_color_fill</mat-icon>
              </button>
              <mat-menu #themeMenu="matMenu" class="themeMenuDropdown">
                <button mat-menu-item *ngFor="let theme of themes; let i = index"
                  (click)="$event.stopPropagation(); setMatTheme(theme)"
                  class="d-flex flex-ai-center flex-jc-space-between">
                  <div><mat-icon *ngIf="activeTheme === theme"
                      class="center theme-check">radio_button_checked</mat-icon>
                    <mat-icon *ngIf="activeTheme != theme" class="center theme-check">radio_button_unchecked</mat-icon>
                    <span>{{ theme }}</span>
                  </div>
                  <mat-icon role="img" svgicon="theme-example" class="mat-icon {{ theme }} ml-16 mr-0"
                    aria-hidden="true" data-mat-icon-type="svg" data-mat-icon-name="theme-example"><svg
                      xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="100%"
                      height="100%" viewBox="0 0 80 80" fit="" preserveAspectRatio="xMidYMid meet" focusable="false">
                      <defs>
                        <path
                          d="M77.87 0C79.05 0 80 .95 80 2.13v75.74c0 1.17-.95 2.13-2.13 2.13H2.13C.96 80 0 79.04 0 77.87V2.13C0 .95.96 0 2.13 0h75.74z"
                          id="a"></path>
                        <path
                          d="M54 40c3.32 0 6 2.69 6 6 0 1.2 0-1.2 0 0 0 3.31-2.68 6-6 6H26c-3.31 0-6-2.69-6-6 0-1.2 0 1.2 0 0 0-3.31 2.69-6 6-6h28z"
                          id="b"></path>
                        <path d="M0 0h80v17.24H0V0z" id="c"></path>
                      </defs>
                      <use xlink:href="#a" fill="#fff" class="docs-theme-icon-background"></use>
                      <use xlink:href="#b" class="docs-theme-icon-button"></use>
                      <use xlink:href="#c" class="docs-theme-icon-toolbar"></use>
                    </svg></mat-icon>
                </button>
              </mat-menu>
            </div>
          </mat-toolbar>
        </div>

        <!-- onboarding stepper -->
        <app-onboarding-popup *ngIf="isStepperEnabled && !isStepperCompleted" [guestUserDetails]="guestUserDetails"
          [isGuestUser]="isGuestUser" [OnboardingFormConfig]="OnboardingFormConfig" [deviceProfile]="deviceProfile"
          (isStepperCompleted)="isStepper($event)">
        </app-onboarding-popup>

        <!-- popup disabled  -->
        <div *ngIf="loadPopUps && isPopupEnabled">
          <!-- 2nd popup BMGS  -->
          <app-modal-wrapper #frameWorkPopUp *ngIf="showFrameWorkPopUp" [config]="{
              disableClose: true,
              panelClass: ['overflow-visible', 'material-modal'],
              autoFocus: false
            }">
            <ng-template sbModalContent let-data>
              <app-popup [dialogProps]="data" [buttonLabel]="resourceService?.frmelmnts?.btn?.submit"
                [isGuestUser]="isGuestUser" (submit)="updateFrameWork($event)"></app-popup>
            </ng-template>
          </app-modal-wrapper>
          <app-validate-teacher-identifier-popup *ngIf="showUserVerificationPopup && labels" [labels]="labels"
            [userFeedData]="userFeed">
          </app-validate-teacher-identifier-popup>
          <!-- 1 & 3rd popup User Type & location -->
          <app-user-onboarding (close)="onLocationSubmit()" *ngIf="
              isGuestUser
                ? showUserTypePopup
                : showUserTypePopup || !isLocationConfirmed
            " [isCustodianOrgUser]="isCustodianOrgUser" [deviceProfile]="deviceProfile"></app-user-onboarding>
        </div>
        <app-tnc-popup (close)="onAcceptTnc()" #termsAndCondPopUp *ngIf="showTermsAndCondPopUp">
        </app-tnc-popup>
        <div *ngIf="showGlobalConsentPopUpSection">
          <app-global-consent-pii [type]="globalConsent" [isglobalConsent]="isglobalConsent"
            (close)="closeConsentPopUp()" [consentConfig]="consentConfig"></app-global-consent-pii>
        </div>
        <app-modal-wrapper [config]="{
            disableClose: true,
            size: 'small',
            panelClass: 'material-modal'
          }" *ngIf="
            isCustodianOrgUser &&
            usersProfile &&
            !usersProfile?.managedBy &&
            !usersProfile?.dob &&
            (usersProfile?.userLocations?.length > 0 || showYearOfBirthPopup)
          ">
          <ng-template sbModalContent let-data>
            <app-year-of-birth [dialogProps]="data"></app-year-of-birth>
          </ng-template>
        </app-modal-wrapper>

        <app-header *ngIf="!hideHeaderNFooter" [layoutConfiguration]="layoutConfiguration" [routerEvents]="routeData$"
          [ngClass]="{ 'header-block': isFullScreenView }"></app-header>
        <app-install-app (viewInBrowser)="viewInBrowser($event)" *ngIf="showAppPopUp && userService.loggedIn">
        </app-install-app>
        <!--<app-breadcrumbs *ngIf="userService.loggedIn"></app-breadcrumbs>-->

        <main>
          <router-outlet *ngIf="
              isIOS || (initApp && !showFrameWorkPopUp && !showTermsAndCondPopUp)
            " (activate)="onActivate($event)"></router-outlet>
        </main>
      </div>
    </div>
    <div *ngIf="isBotEnabled === 'true'" [ngClass]="{ hideBot: isBotdisplayforRoute(), hideBot: isFullScreenView }">
      <lib-chat-window [inputValues]="botObject"></lib-chat-window>
    </div>
    <app-footer [layoutConfiguration]="layoutConfiguration" *ngIf="!hideHeaderNFooter"></app-footer>

    <app-modal-wrapper *ngIf="sessionExpiryInterceptor.sessionExpired"
      [config]="{ disableClose: true, size: 'normal', panelClass: 'material-modal' }">
      <ng-template sbModalContent let-data>
        <div mat-dialog-title>
          <h2>{{ resourceService?.frmelmnts?.lbl?.sesnexrd }}</h2>
        </div>
        <mat-dialog-content>
          <p>
            {{
            resourceService?.frmelmnts?.lbl?.plslgn
            | interpolate : "{instance}" : instance
            }}
          </p>
        </mat-dialog-content>
        <mat-dialog-actions align="end">
          <button mat-raised-button color="accent" class="button-rounded" type="button" (click)="handleLogin()"
            tabindex="0">
            {{ resourceService?.frmelmnts?.btn?.login }}
          </button>
        </mat-dialog-actions>
      </ng-template>
    </app-modal-wrapper>
  </mat-drawer-content>

  <mat-drawer #drawer mode="side" position="end">
    <mat-nav-list style="min-width: 200px;">
      <mat-list-item>
        <mat-icon mat-list-icon>person</mat-icon>
        <div></div>
        <div class="sidenav-item">
          <h5 class="lead">About</h5>
        </div>
      </mat-list-item>

      <mat-list-item>
        <mat-icon mat-list-icon>settings</mat-icon>
        <div></div>
        <div class="sidenav-item">
          <h5 class="lead">Services</h5>
        </div>
      </mat-list-item>

      <mat-list-item>
        <mat-icon mat-list-icon>local_phone</mat-icon>
        <div></div>
        <div class="sidenav-item">
          <h5 class="lead">Contact</h5>
        </div>
      </mat-list-item>
    </mat-nav-list>
  </mat-drawer>
</mat-drawer-container>

<app-telemetry-error-modal></app-telemetry-error-modal>